<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chat</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">

  <div class="w-full max-w-2xl bg-white rounded-2xl shadow-lg p-6 space-y-6">

    <header class="border-b pb-4">
      <h1 class="text-3xl font-bold text-gray-800">Hyderabad Traffic Laws Educator</h1>
      <p class="text-sm text-gray-500 mt-1">Session: 
        <code class="px-2 py-1 bg-gray-100 rounded text-gray-700">{{ session_id }}</code>
      </p>
    </header>

    {% if chat_history %}
      <section class="space-y-3">
        <h2 class="text-xl font-semibold text-gray-700">History</h2>
        <ul class="space-y-2 max-h-64 overflow-y-auto pr-2">
          {% for msg in chat_history %}
            <li class="p-3 rounded-lg 
                       {% if msg.role == 'user' %}bg-blue-50 text-blue-800 self-end text-right{% else %}bg-gray-50 text-gray-800{% endif %}">
              <strong class="block text-xs uppercase tracking-wide text-gray-500">{{ msg.role }}</strong>
              <span>{{ msg.parts[0].text }}</span>
            </li>
          {% endfor %}
        </ul>
      </section>
    {% endif %}

    <form method="post" action="/chat" class="space-y-4">
      <input type="hidden" name="session_id" value="{{ session_id }}" />

      <div>
        <label for="user_input" class="block text-sm font-medium text-gray-700 mb-1">
          Your message
        </label>
        <textarea 
          id="user_input" 
          name="user_input" 
          rows="4"
          class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"
          placeholder="Say something..."
          required></textarea>
      </div>

      <div class="flex justify-end">
        <button 
          type="submit" 
          class="px-5 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow hover:bg-blue-700 transition">
          Send
        </button>
      </div>
    </form>

  </div>

</body>
</html>
